"use strict";(self["webpackChunkprojekt"]=self["webpackChunkprojekt"]||[]).push([[778],{778:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var i=r(6768),n=r(5130),a=r(4232);const s={class:"form-container"},l={class:"form-group"},o={class:"form-group"},u={key:0},h={key:1},c={key:2,class:"map-container"},g=["src"];function m(e,t,r,m,d,p){const k=(0,i.g2)("Tutorial");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(k),(0,i.Lk)("div",s,[t[8]||(t[8]=(0,i.Lk)("h1",null,"Distanz zum Baum und Standort",-1)),(0,i.Lk)("form",{onSubmit:t[1]||(t[1]=(0,n.D$)(((...e)=>p.handleSubmit&&p.handleSubmit(...e)),["prevent"]))},[(0,i.Lk)("div",l,[t[3]||(t[3]=(0,i.Lk)("label",{for:"steps"},"Anzahl der Schritte",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"steps","onUpdate:modelValue":t[0]||(t[0]=e=>d.steps=e),required:"",min:"0",step:"1",placeholder:"z. B. 3"},null,512),[[n.Jo,d.steps,void 0,{number:!0}]])]),t[4]||(t[4]=(0,i.Lk)("div",{class:"form-group"},[(0,i.Lk)("button",{type:"submit",class:"submit-button"},"Absenden")],-1))],32),(0,i.Lk)("div",o,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>p.getLocation&&p.getLocation(...e)),class:"location-button"},"Standort abrufen")]),(0,i.Lk)("div",null,[(0,i.Lk)("p",null,"Uhrzeit: "+(0,a.v_)(d.time),1)]),d.location?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("p",null,"Standort: "+(0,a.v_)(d.location.latitude)+"°, "+(0,a.v_)(d.location.longitude)+"°",1),(0,i.Lk)("p",null,"Abweichung: "+(0,a.v_)(d.location.accuracy)+" Meter",1)])):(0,i.Q3)("",!0),d.submitted?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("p",null,[t[5]||(t[5]=(0,i.eW)("Die berechnete Distanz zum Baum beträgt: ")),(0,i.Lk)("strong",null,(0,a.v_)(p.calculatedDistance)+" Meter",1)])])):(0,i.Q3)("",!0),d.location?((0,i.uX)(),(0,i.CE)("div",c,[t[6]||(t[6]=(0,i.Lk)("h2",null,"Karte mit Standort",-1)),(0,i.Lk)("iframe",{src:p.iframeUrl,width:"425",height:"350",style:{border:"1px solid black"}},null,8,g),t[7]||(t[7]=(0,i.Lk)("br",null,null,-1))])):(0,i.Q3)("",!0)])])}r(4603),r(7566),r(8721);var d=r(9228);const p={key:0,class:"tutorial-overlay"},k={key:0,class:"tutorial-content"},L={key:0},f={key:1},b={key:2},v={key:0,style:{color:"red"}},S={key:3},w={key:0,style:{color:"red"}},y={key:4},C={key:0,style:{color:"red"}},M={key:5},E={key:0},P={key:1},B={key:2},T={key:3,style:{color:"red"}},D={key:1,class:"tutorial-content"},z={class:"step-length-check"},X={key:0,class:"height-input"},A={key:1,class:"manual-step-input"},R={key:2,class:"tutorial-content"};function U(e,t,r,s,l,o){return l.showTutorial?((0,i.uX)(),(0,i.CE)("div",p,[l.showMeasurementTutorial||l.showAdditionalPage?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",k,[l.currentPage<=4?((0,i.uX)(),(0,i.CE)("h2",L,"Citizen Science - Baummessung")):(0,i.Q3)("",!0),1===l.currentPage?((0,i.uX)(),(0,i.CE)("div",f,[t[20]||(t[20]=(0,i.Lk)("h3",null,"Möchten Sie sich jetzt registrieren?",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.goToRegistration&&o.goToRegistration(...e))},"Ja"),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.skipAndStartMeasurementTutorial&&o.skipAndStartMeasurementTutorial(...e))},"Nein, später")])):2===l.currentPage?((0,i.uX)(),(0,i.CE)("div",b,[t[21]||(t[21]=(0,i.Lk)("h3",null,"Benutzername",-1)),t[22]||(t[22]=(0,i.Lk)("p",null,"Suchen Sie sich einen Benutzernamen aus (keine Sonderzeichen oder Zahlen erlaubt):",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.username=e),placeholder:"Benutzername"},null,512),[[n.Jo,l.formData.username]]),l.errorMessage?((0,i.uX)(),(0,i.CE)("p",v,(0,a.v_)(l.errorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.prevPage&&o.prevPage(...e))},"Zurück"),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.nextPage&&o.nextPage(...e))},"Weiter")])):3===l.currentPage?((0,i.uX)(),(0,i.CE)("div",S,[t[23]||(t[23]=(0,i.Lk)("h3",null,"E-Mail",-1)),t[24]||(t[24]=(0,i.Lk)("p",null,"Geben Sie Ihre E-Mail-Adresse ein:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[5]||(t[5]=e=>l.formData.email=e),placeholder:"E-Mail"},null,512),[[n.Jo,l.formData.email]]),l.errorMessage?((0,i.uX)(),(0,i.CE)("p",w,(0,a.v_)(l.errorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.prevPage&&o.prevPage(...e))},"Zurück"),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>o.nextPage&&o.nextPage(...e))},"Weiter")])):4===l.currentPage?((0,i.uX)(),(0,i.CE)("div",y,[t[25]||(t[25]=(0,i.Lk)("h3",null,"Passwort",-1)),t[26]||(t[26]=(0,i.Lk)("p",null,"Wählen Sie ein Passwort aus (mindestens 8 Zeichen):",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":t[8]||(t[8]=e=>l.formData.password=e),placeholder:"Passwort"},null,512),[[n.Jo,l.formData.password]]),l.errorMessage?((0,i.uX)(),(0,i.CE)("p",C,(0,a.v_)(l.errorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>o.prevPage&&o.prevPage(...e))},"Zurück"),(0,i.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>o.finishRegistration&&o.finishRegistration(...e))},"Weiter")])):5===l.currentPage?((0,i.uX)(),(0,i.CE)("div",M,[l.serverErrorMessage?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("h3",E,"Die Registrierung ist vollendet!")),l.serverErrorMessage?((0,i.uX)(),(0,i.CE)("h3",B,"Fehler bei der Registrierung")):((0,i.uX)(),(0,i.CE)("p",P,"Bitte bestätigen Sie Ihre E-Mail-Adresse, um Ihr Konto zu aktivieren.")),l.serverErrorMessage?((0,i.uX)(),(0,i.CE)("p",T,(0,a.v_)(l.serverErrorMessage),1)):(0,i.Q3)("",!0),l.serverErrorMessage?((0,i.uX)(),(0,i.CE)("button",{key:4,onClick:t[11]||(t[11]=(...e)=>o.prevPage&&o.prevPage(...e))},"Zurück")):((0,i.uX)(),(0,i.CE)("button",{key:5,onClick:t[12]||(t[12]=(...e)=>o.closeTutorial&&o.closeTutorial(...e))},"Schließen"))])):(0,i.Q3)("",!0)])),l.showMeasurementTutorial&&!l.showAdditionalPage?((0,i.uX)(),(0,i.CE)("div",D,[t[32]||(t[32]=(0,i.Lk)("h2",null,"Wie misst man einen Baum?",-1)),t[33]||(t[33]=(0,i.Lk)("p",null,"Distanz mit Schritten messen",-1)),t[34]||(t[34]=(0,i.Lk)("h3",null,"Schrittweiten-Tabelle",-1)),t[35]||(t[35]=(0,i.Lk)("b",null,"1. Suche deine Körpergröße aus der Tabelle aus und lege einen normalen Schritt zurück",-1)),(0,i.Lk)("table",null,[t[27]||(t[27]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Körpergröße (cm)"),(0,i.Lk)("th",null,"Frauen-Schrittlänge (cm)"),(0,i.Lk)("th",null,"Männer-Schrittlänge (cm)")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.stepLengths,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:t},[(0,i.Lk)("td",null,(0,a.v_)(e.height),1),(0,i.Lk)("td",null,(0,a.v_)(e.female),1),(0,i.Lk)("td",null,(0,a.v_)(e.male),1)])))),128))])]),t[36]||(t[36]=(0,i.Lk)("b",null,"2. Stelle sicher, dass du maximal ± 5 cm Abweichung von deinem erwarteten Durchschnittswert hast",-1)),t[37]||(t[37]=(0,i.Lk)("br",null,null,-1)),t[38]||(t[38]=(0,i.Lk)("b",null,"3. Gib an, ob deine Schrittlänge dem erwarteten Wert entspricht:",-1)),(0,i.Lk)("div",z,[t[28]||(t[28]=(0,i.Lk)("h3",null,"Entspricht deine Schrittlänge dem erwarteten Wert?",-1)),t[29]||(t[29]=(0,i.Lk)("p",null,"Bitte wähle:",-1)),(0,i.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>o.handleStepLengthYes&&o.handleStepLengthYes(...e))},"Ja"),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>o.handleStepLengthNo&&o.handleStepLengthNo(...e))},"Nein")]),"yes"===l.stepLengthConfirmed?((0,i.uX)(),(0,i.CE)("div",X,[t[30]||(t[30]=(0,i.Lk)("label",{for:"userHeight"},"Bitte gib deine Körpergröße in cm an:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=e=>l.userHeight=e),placeholder:"Körpergröße in cm",id:"userHeight"},null,512),[[n.Jo,l.userHeight,void 0,{number:!0}]]),(0,i.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>o.confirmHeight&&o.confirmHeight(...e))},"Bestätigen")])):(0,i.Q3)("",!0),"no"===l.stepLengthConfirmed?((0,i.uX)(),(0,i.CE)("div",A,[t[31]||(t[31]=(0,i.Lk)("label",{for:"manualStepLength"},"Bitte gib deine Schrittgröße in cm an:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=e=>l.manualStepLength=e),placeholder:"Schrittgröße in cm",id:"manualStepLength"},null,512),[[n.Jo,l.manualStepLength,void 0,{number:!0}]]),(0,i.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>o.confirmManualStep&&o.confirmManualStep(...e))},"Bestätigen")])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),l.showAdditionalPage?((0,i.uX)(),(0,i.CE)("div",R,[t[39]||(t[39]=(0,i.Lk)("h2",null,"Weitere Informationen zur Baummessung",-1)),t[40]||(t[40]=(0,i.Lk)("h3",null,"Tipps zur Messung",-1)),t[41]||(t[41]=(0,i.Lk)("ul",null,[(0,i.Lk)("li",null,"Achte bitte darauf, dass die Höhendifferenz zwischen dir und dem Baum möglichst gering ist. Idealerweise befindest du dich auf der selben Höhe wie der Baum."),(0,i.Lk)("li",null,"Mach bitte zwei Bilder. Ein Bild soll die Neigung des Baums dokumentieren, falls diese vorhanden ist. Das andere Bild soll keine Neigung enthalten (90 °). Beachte: Zwei Bilder mit Neigungen sind fehlerhaft."),(0,i.Lk)("li",null,"Halte bitte dein Gerät ungefähr auf der Brusthöhe, wenn du das Bild machen möchtest."),(0,i.Lk)("li",null,"Achte darauf, dass einige Bäume mehrere Kronen haben können, die möglicherweise höher sind als die anderen.")],-1)),(0,i.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>o.closeTutorial&&o.closeTutorial(...e))},"Schließen")])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)}r(8111),r(116);var H=r(4373),I={data(){return{showTutorial:!0,showMeasurementTutorial:!1,showAdditionalPage:!1,currentPage:1,skipRegistration:!1,formData:{username:"",email:"",password:""},errorMessage:"",serverErrorMessage:"",stepLengthConfirmed:null,userHeight:null,manualStepLength:null,stepLength:null,stepLengths:[{height:152,female:64,male:64},{height:155,female:64,male:64},{height:158,female:66,male:66},{height:160,female:66,male:66},{height:165,female:66,male:69},{height:168,female:69,male:69},{height:170,female:71,male:71},{height:173,female:71,male:71},{height:175,female:71,male:74},{height:178,female:74,male:74},{height:180,female:74,male:76},{height:183,female:76,male:76},{height:185,female:76,male:76},{height:188,female:79,male:79},{height:191,female:79,male:79},{height:193,female:79,male:81},{height:196,female:81,male:81}]}},mounted(){localStorage.getItem("tutorialShown")&&(this.showTutorial=!1)},methods:{nextPage(){2!==this.currentPage||this.validateUsername(this.formData.username)?3!==this.currentPage||this.validateEmail(this.formData.email)?4!==this.currentPage||this.validatePassword(this.formData.password)?(this.errorMessage="",this.currentPage<5&&this.currentPage++):this.errorMessage="Das Passwort muss mindestens acht Zeichen lang sein.":this.errorMessage="Bitte gib eine gültige E-Mail-Adresse ein.":this.errorMessage="Der Benutzername darf keine Sonderzeichen oder Zahlen enthalten."},prevPage(){this.errorMessage="",this.serverErrorMessage="",this.currentPage>1&&this.currentPage--},goToRegistration(){this.skipRegistration=!1,this.currentPage=2},skipAndStartMeasurementTutorial(){this.skipRegistration=!0,this.startMeasurementTutorial()},finishRegistration(){if(!this.validatePassword(this.formData.password))return this.errorMessage="Das Passwort muss mindestens acht Zeichen lang sein.",void(this.currentPage=4);this.errorMessage="",this.startMeasurementTutorial()},async registerUser(){try{const e=await H.A.post("https://treescope.cs.hs-fulda.de/auth/register",{username:this.formData.username,email:this.formData.email,password:this.formData.password,step_length:this.stepLength});if(201!==e.status)throw new Error("Unerwarteter Fehler");console.log("Registrierung erfolgreich:",e.data),this.serverErrorMessage="",this.currentPage=5}catch(e){console.error("Fehler bei der Registrierung:",e),e.response&&403===e.response.status?this.serverErrorMessage="Diese E-Mail-Adresse oder der Benutzername wird bereits verwendet.":this.serverErrorMessage="Es ist ein Fehler aufgetreten. Bitte versuche es erneut.",this.currentPage=5}},validateUsername(e){const t=/^[a-zA-Z]+$/;return t.test(e)},validateEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},validatePassword(e){return e.length>=8},startMeasurementTutorial(){this.showMeasurementTutorial=!0},handleStepLengthYes(){this.stepLengthConfirmed="yes"},handleStepLengthNo(){this.stepLengthConfirmed="no"},confirmHeight(){if(!this.userHeight||this.userHeight<=0)return void alert("Bitte geben Sie eine gültige Körpergröße in cm an.");let e;const t=this.stepLengths.find((e=>e.height>=this.userHeight));if(t)e=(t.female+t.male)/2;else{const t=this.stepLengths[this.stepLengths.length-1];e=(t.female+t.male)/2}this.stepLength=e,localStorage.setItem("userHeight",this.userHeight),localStorage.setItem("derivedStepSize",e),this.showMeasurementTutorial=!1,this.skipRegistration?this.closeTutorial():this.registerUser()},confirmManualStep(){!this.manualStepLength||this.manualStepLength<=0?alert("Bitte geben Sie eine gültige Schrittgröße in cm an."):(this.stepLength=this.manualStepLength,localStorage.setItem("manualStepSize",this.manualStepLength),this.showMeasurementTutorial=!1,this.skipRegistration?this.closeTutorial():this.registerUser())},closeTutorial(){this.showTutorial=!1,localStorage.setItem("tutorialShown","true")}}},Q=r(1241);const _=(0,Q.A)(I,[["render",U]]);var x=_,F={name:"DistanceForm",components:{Tutorial:x},data(){return{steps:"",submitted:!1,location:null,time:null,stepLength:parseFloat(localStorage.getItem("derivedStepSize")||localStorage.getItem("manualStepSize")||"0")/100}},computed:{calculatedDistance(){return(this.steps*this.stepLength).toFixed(2)},iframeUrl(){const{latitude:e,longitude:t}=this.location;return`https://www.openstreetmap.org/export/embed.html?bbox=${t}%2C${e}%2C${t}%2C${e}&layer=mapnik&marker=${e}%2C${t}`}},mounted(){this.getTimeByIP()},methods:{async getTimeByIP(){try{const e=await fetch("http://worldtimeapi.org/api/ip"),t=await e.json();this.time=t.datetime}catch(e){setTimeout(this.getTimeByIP,5e3)}},async handleSubmit(){this.submitted=!0;const e={steps:this.steps,distance:this.calculatedDistance,time:this.time,location:this.location?{latitude:this.location.latitude,longitude:this.location.longitude,accuracy:this.location.accuracy}:null},t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download="data.json",i.click(),URL.revokeObjectURL(i.href)},async getLocation(){try{const e=await d.L.getCurrentPosition({enableHighAccuracy:!0});e.coords&&(this.location=e.coords)}catch(e){console.log("Fehler beim Abrufen des Standorts")}}}};const Z=(0,Q.A)(F,[["render",m],["__scopeId","data-v-cc631fee"]]);var J=Z}}]);
//# sourceMappingURL=778.b2728b30.js.map