"use strict";(self["webpackChunkprojekt"]=self["webpackChunkprojekt"]||[]).push([[93],{655:function(e,t,o){var a=o(6955),r=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},2812:function(e){var t=TypeError;e.exports=function(e,o){if(e<o)throw new t("Not enough arguments");return e}},4603:function(e,t,o){var a=o(6840),r=o(9504),n=o(655),l=o(2812),i=URLSearchParams,s=i.prototype,u=r(s.append),m=r(s["delete"]),d=r(s.forEach),c=r([].push),h=new i("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&a(s,"delete",(function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return m(this,e);var a=[];d(this,(function(e,t){c(a,{key:t,value:e})})),l(t,1);var r,i=n(e),s=n(o),h=0,f=0,p=!1,b=a.length;while(h<b)r=a[h++],p||r.key===i?(p=!0,m(this,r.key)):f++;while(f<b)r=a[f++],r.key===i&&r.value===s||u(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},7566:function(e,t,o){var a=o(6840),r=o(9504),n=o(655),l=o(2812),i=URLSearchParams,s=i.prototype,u=r(s.getAll),m=r(s.has),d=new i("a=1");!d.has("a",2)&&d.has("a",void 0)||a(s,"has",(function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return m(this,e);var a=u(this,e);l(t,1);var r=n(o),i=0;while(i<a.length)if(a[i++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},7594:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});o(4114);var a=o(6768),r=o(5130),n=o(4232),l=o(1387),i=o(9228);const s={class:"formbold-input-flex"},u=["value"],m={key:0},d=["src"],c={data(){return{dropDownList:[],location:null,formData:{tree_type_id:0,latitude:0,longitude:0,health_status_id:1,measurement:{height:0,inclination:0,trunk_diameter:0,notes:null},files:[]}}},computed:{iframeUrl(){const{latitude:e,longitude:t}=this.location;return`https://www.openstreetmap.org/export/embed.html?bbox=${t}%2C${e}%2C${t}%2C${e}&layer=mapnik&marker=${e}%2C${t}`}},methods:{async submitForm(){try{console.log(JSON.stringify(this.formData));const e=await fetch("https://treescope.cs.hs-fulda.de/api/v1/trees/create-tree",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(this.formData)}),t=await e.json();console.log("Antwort vom Server:",t)}catch(e){console.error("Fehler beim Senden des Formulars:",e)}},async fetchTreeTypes(){try{const e=await fetch("https://treescope.cs.hs-fulda.de/api/v1/trees/types",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});e.ok||console.log("Fehler beim Abrufen der Baumarten");const t=await e.json();console.log("Baumarten vom Server:",t),this.dropDownList=t.tree_types||[]}catch(e){console.error("Fehler beim Abrufen der Baumarten:",e),this.dropDownList=[]}},async getLocation(){try{const e=await i.L.getCurrentPosition({enableHighAccuracy:!0});e.coords&&(this.location=e.coords,this.formData.latitude=Number(this.location.latitude.toFixed(6)),this.formData.longitude=Number(this.location.longitude.toFixed(6)))}catch(e){console.log("GeoLocation konnte nicht abgerufen werden:",e)}},addFileInput(){this.formData.files.push({filename:"",photo_data:"",description:""})},handleFileUpload(e,t){this.addFileInput();const o=e.target.files[0];if(!o)return;const a=new FileReader;a.readAsDataURL(o),a.onload=()=>{this.formData.files[t].filename=o.name,this.formData.files[t].photo_data=a.result},a.onerror=e=>{console.error("Fehler beim Lesen der Datei:",e)}}},created:function(){this.getLocation(),this.fetchTreeTypes()}};var h=Object.assign(c,{__name:"TreeForm",setup(e){const t=(0,l.rd)(),o=()=>{const e=localStorage.getItem("token");e||t.push("/")};return(0,a.sV)((()=>{o()})),(e,t)=>((0,a.uX)(),(0,a.CE)("form",{class:"form-container",onSubmit:t[7]||(t[7]=(0,r.D$)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"]))},[t[11]||(t[11]=(0,a.Lk)("h2",{class:"formbold-form-title"},"Baumregistrierung",-1)),(0,a.Lk)("div",s,[t[9]||(t[9]=(0,a.Lk)("label",{class:"formbold-form-label"},"Baumart",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.tree_type_id=t),class:"formbold-form-input",required:""},[t[8]||(t[8]=(0,a.Lk)("option",{value:"",disabled:""},"Bitte Baumart wählen",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.dropDownList,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,u)))),128))],512),[[r.u1,e.formData.tree_type_id]])]),t[12]||(t[12]=(0,a.Lk)("label",{class:"formbold-form-label"},"Höhe des Baumes",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.measurement.height=t),placeholder:"Höhe",min:"1",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.height]]),t[13]||(t[13]=(0,a.Lk)("label",{class:"formbold-form-label"},"Neigung",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.measurement.inclination=t),placeholder:"Neigung",min:"1",max:"89",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.inclination]]),t[14]||(t[14]=(0,a.Lk)("label",{class:"formbold-form-label"},"Durchmesser des Stamms",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.measurement.trunk_diameter=t),placeholder:"Durchmesser des Stamms",min:"1",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.trunk_diameter]]),t[15]||(t[15]=(0,a.Lk)("label",{class:"formbold-form-label"},"Notiz",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.measurement.notes=t),placeholder:"Notiz"},null,512),[[r.Jo,e.formData.measurement.notes]]),(0,a.Lk)("input",{type:"file",onChange:t[5]||(t[5]=t=>e.handleFileUpload(t,0))},null,32),(0,a.Lk)("input",{type:"file",onChange:t[6]||(t[6]=t=>e.handleFileUpload(t,1))},null,32),e.location?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("iframe",{src:e.iframeUrl,style:{border:"1px solid black"}},null,8,d),t[10]||(t[10]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0),t[16]||(t[16]=(0,a.Lk)("button",{type:"submit"},"Absenden",-1))],32))}}),f=o(1241);const p=(0,f.A)(h,[["__scopeId","data-v-0dcfb403"]]);var b=p},8721:function(e,t,o){var a=o(3724),r=o(9504),n=o(2106),l=URLSearchParams.prototype,i=r(l.forEach);a&&!("size"in l)&&n(l,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=93.170bc7e8.js.map