{"version":3,"file":"js/93.170bc7e8.js","mappings":"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","sources":["webpack://projekt/./node_modules/core-js/internals/to-string.js","webpack://projekt/./node_modules/core-js/internals/validate-arguments-length.js","webpack://projekt/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://projekt/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://projekt/./src/components/TreeForm.vue","webpack://projekt/./src/components/TreeForm.vue?a936","webpack://projekt/./node_modules/core-js/modules/web.url-search-params.size.js"],"sourcesContent":["'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","<template>\r\n\r\n  <form class=\"form-container\" @submit.prevent=\"submitForm\">\r\n    <h2 class=\"formbold-form-title\">Baumregistrierung</h2>\r\n\r\n    <div class=\"formbold-input-flex\">\r\n      <label class=\"formbold-form-label\">Baumart</label>\r\n      <select v-model=\"formData.tree_type_id\" class=\"formbold-form-input\" required>\r\n        <option value=\"\" disabled>Bitte Baumart wählen</option>\r\n        <option v-for=\"tree in dropDownList\" :key=\"tree.id\" :value=\"tree.id\">\r\n          {{ tree.name }}\r\n        </option>\r\n      </select>\r\n\r\n    </div>\r\n\r\n    <label class=\"formbold-form-label\">Höhe des Baumes</label>\r\n    <input v-model=\"formData.measurement.height\" placeholder=\"Höhe\" min=\"1\" type=\"number\" class=\"formbold-form-input\"\r\n      required />\r\n\r\n    <label class=\"formbold-form-label\">Neigung</label>\r\n    <input v-model=\"formData.measurement.inclination\" placeholder=\"Neigung\" min=\"1\" max=\"89\" type=\"number\"\r\n      class=\"formbold-form-input\" required />\r\n\r\n    <label class=\"formbold-form-label\">Durchmesser des Stamms</label>\r\n    <input v-model=\"formData.measurement.trunk_diameter\" placeholder=\"Durchmesser des Stamms\" min=\"1\" type=\"number\"\r\n      class=\"formbold-form-input\" required />\r\n\r\n    <label class=\"formbold-form-label\">Notiz</label>\r\n    <input v-model=\"formData.measurement.notes\" placeholder=\"Notiz\" />\r\n\r\n    <input type=\"file\" @change=\"handleFileUpload($event, 0)\" />\r\n    <input type=\"file\" @change=\"handleFileUpload($event, 1)\" />\r\n\r\n    <div v-if=\"location\">\r\n      <iframe :src=\"iframeUrl\" style=\"border: 1px solid black\"></iframe>\r\n      <br />\r\n    </div>\r\n    <button type=\"submit\">Absenden</button>\r\n  </form>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { Geolocation } from '@capacitor/geolocation';\r\n\r\n\r\n//const token = localStorage.getItem(\"token\");\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dropDownList: [],\r\n      location: null,\r\n      formData: {\r\n        tree_type_id: 0,\r\n        latitude: 0,\r\n        longitude: 0,\r\n        health_status_id: 1,\r\n        measurement: {\r\n          height: 0,\r\n          inclination: 0,\r\n          trunk_diameter: 0,\r\n          notes: null,\r\n        },\r\n        files: []\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    iframeUrl() {\r\n      const { latitude, longitude } = this.location;\r\n      return `https://www.openstreetmap.org/export/embed.html?bbox=${longitude}%2C${latitude}%2C${longitude}%2C${latitude}&layer=mapnik&marker=${latitude}%2C${longitude}`;\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    async submitForm() {\r\n      try {\r\n        console.log(JSON.stringify(this.formData));\r\n        const response = await fetch(\"https://treescope.cs.hs-fulda.de/api/v1/trees/create-tree\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",  // API erwartet JSON-Daten\r\n            \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n          body: JSON.stringify(this.formData)\r\n        });\r\n\r\n        const result = await response.json();\r\n        console.log(\"Antwort vom Server:\", result);\r\n      } catch (error) {\r\n        console.error(\"Fehler beim Senden des Formulars:\", error);\r\n      }\r\n    },\r\n    async fetchTreeTypes() {\r\n      try {\r\n        const response = await fetch(\"https://treescope.cs.hs-fulda.de/api/v1/trees/types\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",  // API erwartet JSON-Daten\r\n            \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          console.log(\"Fehler beim Abrufen der Baumarten\");\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"Baumarten vom Server:\", data);\r\n\r\n        this.dropDownList = data.tree_types || [];\r\n\r\n      } catch (error) {\r\n        console.error(\"Fehler beim Abrufen der Baumarten:\", error);\r\n        this.dropDownList = []; // Setze eine leere Liste als Fallback\r\n      }\r\n    },\r\n    async getLocation() {\r\n      try {\r\n        const position = await Geolocation.getCurrentPosition({ enableHighAccuracy: true });\r\n        if (position.coords) {\r\n          // Runden auf maximal sechs Nachkommastellen\r\n          this.location = position.coords;\r\n          this.formData.latitude = Number(this.location.latitude.toFixed(6));\r\n          this.formData.longitude = Number(this.location.longitude.toFixed(6));\r\n        }\r\n      } catch (error) {\r\n        console.log(\"GeoLocation konnte nicht abgerufen werden:\", error);\r\n      }\r\n    },\r\n    addFileInput() {\r\n      this.formData.files.push({ filename: \"\", photo_data: \"\", description: \"\" });\r\n    },\r\n    handleFileUpload(event, index) {\r\n      this.addFileInput();\r\n      const file = event.target.files[0]; // Greift auf die ausgewählte Datei zu\r\n      if (!file) return; // Falls keine Datei gewählt wurde, nichts tun\r\n\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n\r\n      reader.onload = () => {\r\n        this.formData.files[index].filename = file.name;\r\n        this.formData.files[index].photo_data = reader.result;\r\n      };\r\n\r\n      reader.onerror = (error) => {\r\n        console.error(\"Fehler beim Lesen der Datei:\", error);\r\n      };\r\n    }\r\n  },\r\n  created: function () {\r\n    this.getLocation()\r\n    this.fetchTreeTypes()\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<script setup>\r\nimport { onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\n// Variable, um zu prüfen, ob der Benutzer authentifiziert ist\r\nconst router = useRouter();\r\n\r\n// Überprüfen, ob ein gültiges Token im localStorage vorhanden ist\r\nconst checkAuth = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    router.push(\"/\"); // Falls kein Token vorhanden ist, zurück zur Login-Seite\r\n    return;\r\n  }\r\n};\r\n\r\n\r\n\r\n// Beim Laden der Seite die Authentifizierung prüfen\r\nonMounted(() => {\r\n  checkAuth();\r\n});\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n@import './style.css';\r\n</style>\r\n","import script from \"./TreeForm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TreeForm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TreeForm.vue?vue&type=style&index=0&id=0dcfb403&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0dcfb403\"]])\n\nexport default __exports__","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n"],"names":["classof","$String","String","module","exports","argument","TypeError","$TypeError","passed","required","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","append","$delete","forEach","push","params","undefined","name","length","arguments","$value","this","entries","v","k","key","value","entry","index","dindex","found","entriesLength","enumerable","unsafe","getAll","$has","has","values","__default__","data","dropDownList","location","formData","tree_type_id","latitude","longitude","health_status_id","measurement","height","inclination","trunk_diameter","notes","files","computed","iframeUrl","methods","submitForm","console","log","JSON","stringify","response","fetch","method","headers","localStorage","getItem","body","result","json","error","fetchTreeTypes","ok","tree_types","getLocation","position","Geolocation","getCurrentPosition","enableHighAccuracy","coords","Number","toFixed","addFileInput","filename","photo_data","description","handleFileUpload","event","file","target","reader","FileReader","readAsDataURL","onload","onerror","created","router","useRouter","checkAuth","token","onMounted","__exports__","DESCRIPTORS","defineBuiltInAccessor","get","count","configurable"],"sourceRoot":""}