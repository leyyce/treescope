"use strict";(self["webpackChunkprojekt"]=self["webpackChunkprojekt"]||[]).push([[66],{655:function(e,t,a){var o=a(6955),r=String;e.exports=function(e){if("Symbol"===o(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},2812:function(e){var t=TypeError;e.exports=function(e,a){if(e<a)throw new t("Not enough arguments");return e}},4603:function(e,t,a){var o=a(6840),r=a(9504),n=a(655),l=a(2812),i=URLSearchParams,s=i.prototype,u=r(s.append),m=r(s["delete"]),d=r(s.forEach),c=r([].push),f=new i("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&o(s,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return m(this,e);var o=[];d(this,(function(e,t){c(o,{key:t,value:e})})),l(t,1);var r,i=n(e),s=n(a),f=0,h=0,p=!1,b=o.length;while(f<b)r=o[f++],p||r.key===i?(p=!0,m(this,r.key)):h++;while(h<b)r=o[h++],r.key===i&&r.value===s||u(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},5607:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});a(4114);var o=a(6768),r=a(5130),n=a(1387),l=a(9228);const i={class:"formbold-input-flex"},s={key:0},u=["src"],m={data(){return{location:null,formData:{tree_type:"",latitude:0,longitude:0,health_status:1,measurement:{suspected_tree_type:"",height:0,inclination:0,trunk_diameter:0,notes:null},files:[]}}},computed:{iframeUrl(){const{latitude:e,longitude:t}=this.location;return`https://www.openstreetmap.org/export/embed.html?bbox=${t}%2C${e}%2C${t}%2C${e}&layer=mapnik&marker=${e}%2C${t}`}},methods:{async submitForm(){try{this.formData.measurement.suspected_tree_type=this.formData.tree_type,console.log(JSON.stringify(this.formData));const e=await fetch("https://treescope.cs.hs-fulda.de/api/v1/trees/create-tree",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(this.formData)}),t=await e.json();console.log("Antwort vom Server:",t)}catch(e){console.error("Fehler beim Senden des Formulars:",e)}},async getLocation(){try{const e=await l.L.getCurrentPosition({enableHighAccuracy:!0});e.coords&&(this.location=e.coords,this.formData.latitude=Number(this.location.latitude.toFixed(6)),this.formData.longitude=Number(this.location.longitude.toFixed(6)))}catch(e){console.log("GeoLocation konnte nicht abgerufen werden:",e)}},addFileInput(){this.formData.files.push({filename:"",photo_data:"",description:""})},handleFileUpload(e,t){this.addFileInput();const a=e.target.files[0];if(!a)return;const o=new FileReader;o.readAsDataURL(a),o.onload=()=>{this.formData.files[t].filename=a.name,this.formData.files[t].photo_data=o.result},o.onerror=e=>{console.error("Fehler beim Lesen der Datei:",e)}}},created:function(){this.getLocation()}};var d=Object.assign(m,{__name:"TreeForm",setup(e){const t=(0,n.rd)(),a=()=>{const e=localStorage.getItem("token");e||t.push("/")};return(0,o.sV)((()=>{a()})),(e,t)=>((0,o.uX)(),(0,o.CE)("form",{class:"form-container",onSubmit:t[7]||(t[7]=(0,r.D$)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"]))},[t[10]||(t[10]=(0,o.Lk)("h2",{class:"formbold-form-title"},"Baumregistrierung",-1)),(0,o.Lk)("div",i,[t[8]||(t[8]=(0,o.Lk)("label",{class:"formbold-form-label"},"Baumart",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.tree_type=t),placeholder:"Baumart",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.tree_type]])]),t[11]||(t[11]=(0,o.Lk)("label",{class:"formbold-form-label"},"Höhe des Baumes",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.measurement.height=t),placeholder:"Höhe",min:"1",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.height]]),t[12]||(t[12]=(0,o.Lk)("label",{class:"formbold-form-label"},"Neigung",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.measurement.inclination=t),placeholder:"Neigung",min:"1",max:"89",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.inclination]]),t[13]||(t[13]=(0,o.Lk)("label",{class:"formbold-form-label"},"Durchmesser des Stamms",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.measurement.trunk_diameter=t),placeholder:"Durchmesser des Stamms",min:"1",type:"number",class:"formbold-form-input",required:""},null,512),[[r.Jo,e.formData.measurement.trunk_diameter]]),t[14]||(t[14]=(0,o.Lk)("label",{class:"formbold-form-label"},"Notiz",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.measurement.notes=t),placeholder:"Notiz"},null,512),[[r.Jo,e.formData.measurement.notes]]),(0,o.Lk)("input",{type:"file",onChange:t[5]||(t[5]=t=>e.handleFileUpload(t,0))},null,32),(0,o.Lk)("input",{type:"file",onChange:t[6]||(t[6]=t=>e.handleFileUpload(t,1))},null,32),e.location?((0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("iframe",{src:e.iframeUrl,style:{border:"1px solid black"}},null,8,u),t[9]||(t[9]=(0,o.Lk)("br",null,null,-1))])):(0,o.Q3)("",!0),t[15]||(t[15]=(0,o.Lk)("button",{type:"submit"},"Absenden",-1))],32))}}),c=a(1241);const f=(0,c.A)(d,[["__scopeId","data-v-1c625d00"]]);var h=f},7566:function(e,t,a){var o=a(6840),r=a(9504),n=a(655),l=a(2812),i=URLSearchParams,s=i.prototype,u=r(s.getAll),m=r(s.has),d=new i("a=1");!d.has("a",2)&&d.has("a",void 0)||o(s,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return m(this,e);var o=u(this,e);l(t,1);var r=n(a),i=0;while(i<o.length)if(o[i++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(e,t,a){var o=a(3724),r=a(9504),n=a(2106),l=URLSearchParams.prototype,i=r(l.forEach);o&&!("size"in l)&&n(l,"size",{get:function(){var e=0;return i(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=66.62f7c182.js.map